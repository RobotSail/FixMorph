[K	

####################################################################################################

	Crochet - Horizontal Code Edit Transfer

####################################################################################################
[K
====================================================================================================

	Initializing project for Transfer
====================================================================================================

[K
	loading configuration
	__________________________________________________________________________________________

[K	reading configuration values
[K
	set environment
	__________________________________________________________________________________________

[K	setting environment values
[K
====================================================================================================

	Building Projects
====================================================================================================

[K
	building binaries
	__________________________________________________________________________________________

[K
		restoring projects
		------------------------------------------------------------------------------------------

[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.2/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0-patch/
[K
		cleaning projects
		------------------------------------------------------------------------------------------

[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.2/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0-patch/
[K
		configuring projects
		------------------------------------------------------------------------------------------

[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.2/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0-patch/
[K
		building projects
		------------------------------------------------------------------------------------------

[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.3.2/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0/
[K		/imageworsener/CVE-2017-9203/imageworsener-1.2.0-patch/
[K
	Successful building binaries, after 57.66702938079834 seconds.
[K
====================================================================================================

	Analysing Changes
====================================================================================================

[K
	analysing source diff
	__________________________________________________________________________________________

[K		finding changed files...
[K
		analysing header files
		------------------------------------------------------------------------------------------

[K			extracting changed header files...
[K			header files:
[K				-none-
[K
		analysing C/CPP source files
		------------------------------------------------------------------------------------------

[K			extracting changed c/cpp files...
[K			source files:
[K				/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-bmp.c
[K				/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-main.c
[K
		analysing changed code segments
		------------------------------------------------------------------------------------------

[K			collecting diff info...
[K			/imageworsener/CVE-2017-9203/imageworsener-1.3.1/:
[K				bmpr_read_rle in Pa/src/imagew-bmp.c
[K				bmpr_read_rle 842-879[K[K			/imageworsener/CVE-2017-9203/imageworsener-1.3.2/:
[K				bmpr_read_rle in Pb/src/imagew-bmp.c
[K				bmpr_read_rle 842-881[K[K			/imageworsener/CVE-2017-9203/imageworsener-1.3.1/:
[K				iw_process_rows_intermediate_to_final in Pa/src/imagew-main.c
[K				iw_process_rows_intermediate_to_final 927-1139[K[K			/imageworsener/CVE-2017-9203/imageworsener-1.3.2/:
[K				iw_process_rows_intermediate_to_final in Pb/src/imagew-main.c
[K				iw_process_rows_intermediate_to_final 925-1151[K[K
	Successful analysing source diff, after 2.0158193111419678 seconds.
[K
	analysing ast diff
	__________________________________________________________________________________________

[K
		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-bmp.c
		------------------------------------------------------------------------------------------

[K		generating AST script
[K		line number:854
[K			filtering AST script by merging and grouping
[K			merging AST script
[K
		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-main.c
		------------------------------------------------------------------------------------------

[K		generating AST script
[K		line number:959
[K			filtering AST script by merging and grouping
[K			merging AST script
[K		line number:925
[K
		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-bmp.c
		------------------------------------------------------------------------------------------

[K		generating AST script
[K		line number:849
[K			filtering AST script by merging and grouping
[K			merging AST script
[K
		/imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-main.c
		------------------------------------------------------------------------------------------

[K		generating AST script
[K		line number:960
[K			filtering AST script by merging and grouping
[K			merging AST script
[K		line number:953
[K			filtering AST script by merging and grouping
[K			merging AST script
[K
	Successful analysing ast diff, after 5.201891660690308 seconds.
[K
====================================================================================================

	Clone Detection
====================================================================================================

[K
	generating vectors for target
	__________________________________________________________________________________________

[K
		Generating vector files for all functions in Target
		------------------------------------------------------------------------------------------

[K			generating vectors for *\.c files in Pc...
[K				Failed parsing AST for file:
			/imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-png.c
[K				Failed parsing AST for file:
			/imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-cmd.c
[K				Failed parsing AST for file:
			/imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-api.c
[K
	Successful generating vectors for target, after 26.616987943649292 seconds.
[K
	finding clones in target
	__________________________________________________________________________________________

[K
		Finding clone functions in Target
		------------------------------------------------------------------------------------------

[K		checking vectors for C files in Pa...
[K		checking vectors for C files in Pc...
[K		Variable mapping...

[K		Possible match for iw_process_rows_intermediate_to_final in $Pa/src/imagew-main.c:
[K			Function: iw_process_rows_intermediate_to_final in $Pc/src/imagew-main.c
[K			Distance: 0.0015421961094797747

[K		Variable mapping from iw_process_rows_intermediate_to_final to iw_process_rows_intermediate_to_final:
[K			using_errdiffdithe using_errdiffdither -> using_errdiffdithe using_errdiffdither
[K			num_out_pi num_out_pix -> num_out_pi num_out_pix
[K			struct iw_context * ctx -> struct iw_context * ctx
[K			alt_bkg alt_bkgd -> alt_bkg alt_bkgd
[K			put_sample_convert_from_linea put_sample_convert_from_linear -> put_sample_convert_from_linea put_sample_convert_from_linear
[K			j ->  j
[K			int is_alpha_channel -> is_alpha_channe is_alpha_channel
[K			int i ->  i
[K			iw_tmpsample tmpsamp -> tmpsam tmpsamp
[K			iw_tmpsample * in_pix -> in_pi in_pix
[K			int retval -> retva retval
[K			intermed_channe intermed_channel -> int intermed_channel
[K			int alt_bkgd -> alt_bkg alt_bkgd
[K			double tmpbkgdalpha -> tmpbkgdalph tmpbkgdalpha
[K			int ditherfamily -> ditherfamil ditherfamily
[K			num_in_pi num_in_pix -> num_in_pi num_in_pix
[K			int bkgd_has_transparency -> bkgd_has_transparenc bkgd_has_transparency
[K			out_pi out_pix -> out_pi out_pix
[K			dithersubtyp dithersubtype -> dithersubtyp dithersubtype
[K			retva retval -> retva retval
[K			int output_channel -> output_channe output_channel
[K			inpix_tofre inpix_tofree -> inpix_tofre inpix_tofree
[K			iwpvt_prng_set_random_see iwpvt_prng_set_random_seed -> iwpvt_prng_set_random_see iwpvt_prng_set_random_seed
[K			iw_mallo iw_malloc -> iw_mallo iw_malloc
[K			int z ->  z
[K			iw_tmpsample * inpix_tofree -> inpix_tofre inpix_tofree
[K			iw_tmpsample * outpix_tofree -> outpix_tofre outpix_tofree
[K			z ->  z
[K			iwpvt_resize_rows_ini iwpvt_resize_rows_init -> iwpvt_resize_rows_ini iwpvt_resize_rows_init
[K			i ->  i
[K			output_channe output_channel -> output_channe output_channel
[K			bkcolo bkcolor -> bkcolo bkcolor
[K			int_c int_ci -> int_c int_ci
[K			iw_bkgd_has_transparenc iw_bkgd_has_transparency -> iw_bkgd_has_transparenc iw_bkgd_has_transparency
[K			int using_errdiffdither -> using_errdiffdithe using_errdiffdither
[K			k ->  k
[K			iw_tmpsample alphasamp -> alphasam alphasamp
[K			struct iw_resize_settings * rs -> r rs
[K			out_c out_ci -> out_c out_ci
[K			const struct iw_csdescr * out_csdescr -> const struct iw_csdescr * out_csdescr
[K			ct ctx -> struct iw_context * ctx
[K			bkgd_has_transparenc bkgd_has_transparency -> bkgd_has_transparenc bkgd_has_transparency
[K			outpix_tofre outpix_tofree -> outpix_tofre outpix_tofree
[K			ditherfamil ditherfamily -> ditherfamil ditherfamily
[K			tmpsam tmpsamp -> tmpsam tmpsamp
[K			in_pi in_pix -> in_pi in_pix
[K			double bkcolor -> bkcolo bkcolor
[K			struct iw_channelinfo_out * out_ci -> out_c out_ci
[K			out_csdesc out_csdescr -> const struct iw_csdescr * out_csdescr
[K			put_sample_convert_from_linear_fl put_sample_convert_from_linear_flt -> put_sample_convert_from_linear_fl put_sample_convert_from_linear_flt
[K			int dithersubtype -> dithersubtyp dithersubtype
[K			is_alpha_channe is_alpha_channel -> is_alpha_channe is_alpha_channel
[K			alphasam alphasamp -> alphasam alphasamp
[K			iwpvt_resize_row_mai iwpvt_resize_row_main -> iwpvt_resize_row_mai iwpvt_resize_row_main
[K			int num_in_pix -> num_in_pi num_in_pix
[K			clamp_output_sample clamp_output_samples -> clamp_output_sample clamp_output_samples
[K			iw_fre iw_free -> iw_fre iw_free
[K			int intermed_channel -> int intermed_channel
[K			int num_out_pix -> num_out_pi num_out_pix
[K			int k ->  k
[K			int j ->  j
[K			r rs -> r rs
[K			tmpbkgdalph tmpbkgdalpha -> tmpbkgdalph tmpbkgdalpha
[K			iw_tmpsample * out_pix -> out_pi out_pix
[K			iwpvt_resize_rows_don iwpvt_resize_rows_done -> iwpvt_resize_rows_don iwpvt_resize_rows_done
[K			struct iw_channelinfo_intermed * int_ci -> int_c int_ci
[K		Best match for iw_process_rows_intermediate_to_final in $Pa/src/imagew-main.c:
[K			Function: iw_process_rows_intermediate_to_final in $Pc/src/imagew-main.c
[K			Distance: 0.0015421961094797747

[K		Possible match for bmpr_read_rle in $Pa/src/imagew-bmp.c:
[K			Function: bmpr_read_rle in $Pc/src/imagew-bmp.c
[K			Distance: 0.0

[K		Variable mapping from bmpr_read_rle to bmpr_read_rle:
[K			struct iwbmprcontext * rctx -> struct iwbmprcontext * rctx
[K			bmpr_has_transparenc bmpr_has_transparency -> bmpr_has_transparenc bmpr_has_transparency
[K			iw_calc_bytesperro iw_calc_bytesperrow -> iw_calc_bytesperro iw_calc_bytesperrow
[K			retva retval -> retva retval
[K			bmpr_strip_alph bmpr_strip_alpha -> bmpr_strip_alph bmpr_strip_alpha
[K			int retval -> retva retval
[K			bmpr_read_rle_interna bmpr_read_rle_internal -> bmpr_read_rle_interna bmpr_read_rle_internal
[K			iw_malloc_larg iw_malloc_large -> iw_malloc_larg iw_malloc_large
[K			iw_set_erro iw_set_error -> iw_set_erro iw_set_error
[K			rct rctx -> struct iwbmprcontext * rctx
[K		Best match for bmpr_read_rle in $Pa/src/imagew-bmp.c:
[K			Function: bmpr_read_rle in $Pc/src/imagew-bmp.c
[K			Distance: 0.0

[K
	Successful finding clones in target, after 2.526211977005005 seconds.
[K
====================================================================================================

	Generating GumTree script for patch
====================================================================================================

[K
	Starting generating script for header files...
	__________________________________________________________________________________________

[K
	Successful generating script for header files, after 6.937980651855469e-05 seconds.
[K
	Starting generating script for C files...
	__________________________________________________________________________________________

[K	Generating edit script: imagew-main.c to imagew-main.c...
[K	Generating edit script: imagew-bmp.c to imagew-bmp.c...
[K
	Successful generating script for C files, after 1.643819808959961 seconds.
[K
====================================================================================================

	Variable Mapping
====================================================================================================

[K
	Variable mapping for header files
	__________________________________________________________________________________________

[K		 -nothing-to-do
[K
	Variable mapping for C files
	__________________________________________________________________________________________

[K	Generating mapping: imagew-bmp.c to imagew-bmp.c...
[K	Generating mapping: imagew-main.c to imagew-main.c...
[K
====================================================================================================

	Translate GumTree Script
====================================================================================================

[K
	Translating scripts for header files
	__________________________________________________________________________________________

[K
	Translating scripts for C files
	__________________________________________________________________________________________

[K	Generating JSON temp files for each pertinent file...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-bmp.c in Pa...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.3.2/src/imagew-bmp.c in Pb...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-bmp.c in Pc...
[K	Generating JSON temp files for each pertinent file...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.3.1/src/imagew-main.c in Pa...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.3.2/src/imagew-main.c in Pb...
[K			Clang AST parse /imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-main.c in Pc...
[K
====================================================================================================

	Applying transformation
====================================================================================================

[K
	Transforming file /imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-bmp.c
	__________________________________________________________________________________________

[K	Original AST script
[K			AST Script:
[K				 Insert GotoStmt(5224) CompoundStmt(5218) 1
[K				 Insert GotoStmt(5234) CompoundStmt(5228) 1
[K	Generated AST script
[K			AST Script:
[K				 Insert GotoStmt(5224) into CompoundStmt(5061) at 1
[K				 Insert GotoStmt(5234) into CompoundStmt(5070) at 1
[K	Original Patch
[K		849a850
[K		> 		goto done;
[K		854a856
[K		> 		goto done;
[K	Generated Patch
[K		817a818,819
[K		>  goto done;
[K		>
[K		822a825,826
[K		>  goto done;
[K		>
[K
	Successful transformation
[K
	Transforming file /imageworsener/CVE-2017-9203/imageworsener-1.2.0/src/imagew-main.c
	__________________________________________________________________________________________

[K	Original AST script
[K			AST Script:
[K				 Insert DeclStmt(8000) CompoundStmt(7909) 22
[K				 Insert VarDecl(8001) DeclStmt(8000) 0
[K				 Insert TypeLoc(8002) VarDecl(8001) 0
[K				 Insert TypeLoc(8003) TypeLoc(8002) 0
[K				 Insert IfStmt(8024) CompoundStmt(7909) 27
[K				 Insert BinaryOperator(8025) IfStmt(8024) 0
[K				 Insert DeclRefExpr(8026) BinaryOperator(8025) 0
[K				 Insert IntegerLiteral(8027) BinaryOperator(8025) 1
[K				 Insert CompoundStmt(8028) IfStmt(8024) 1
[K				 Move BinaryOperator(8029) CompoundStmt(8028) 0
[K				 Insert CompoundStmt(8036) IfStmt(8024) 2
[K				 Insert CallExpr(8037) CompoundStmt(8036) 0
[K				 Insert DeclRefExpr(8038) CallExpr(8037) 0
[K				 Insert UnaryOperator(8039) CallExpr(8037) 1
[K				 Insert DeclRefExpr(8040) UnaryOperator(8039) 0
[K				 Insert UnaryExprOrTypeTraitExpr(8041) CallExpr(8037) 2
[K				 Insert TypeLoc(8042) UnaryExprOrTypeTraitExpr(8041) 0
[K				 Insert TypeLoc(8043) TypeLoc(8042) 0
[K				 Insert BinaryOperator(8044) CompoundStmt(8036) 1
[K				 Insert MemberExpr(8045) BinaryOperator(8044) 0
[K				 Insert DeclRefExpr(8046) MemberExpr(8045) 0
[K				 Insert Macro(8047) BinaryOperator(8044) 1
[K				 Insert BinaryOperator(8048) CompoundStmt(8036) 2
[K				 Insert DeclRefExpr(8049) BinaryOperator(8048) 0
[K				 Insert UnaryOperator(8050) BinaryOperator(8048) 1
[K				 Insert DeclRefExpr(8051) UnaryOperator(8050) 0
[K	Generated AST script
[K			AST Script:
[K				 Delete BinaryOperator(8171)
[K				 Insert DeclStmt(8000) into CompoundStmt(8060) at 22
[K				 Insert IfStmt(8024) into CompoundStmt(8060) at 26
[K	Original Patch
[K		925,926d924
[K		< // 'handle_alpha_flag' must be set if an alpha channel exists and this is not
[K		< // the alpha channel.
[K		953a952
[K		> 	struct iw_channelinfo_out default_ci_out;
[K		959a959
[K		> 	if(output_channel>=0) {
[K		960a961,972
[K		> 	}
[K		> 	else {
[K		> 		// If there is no output channelinfo struct, create a temporary one to
[K		> 		// use.
[K		> 		// TODO: This is admittedly ugly, but we use these settings for a few
[K		> 		// things even when there is no corresponding output channel, and I
[K		> 		// don't remember exactly why.
[K		> 		iw_zeromem(&default_ci_out, sizeof(struct iw_channelinfo_out));
[K		> 		default_ci_out.channeltype = IW_CHANNELTYPE_NONALPHA;
[K		> 		out_ci = &default_ci_out;
[K		> 	}
[K		>
[K	Generated Patch
[K		1002a1003,1004
[K		>  struct iw_channelinfo_out default_ci_out;
[K		>
[K		1009c1011,1025
[K		< 	out_ci = &ctx->img2_ci[output_channel];
[K		---
[K		>  if(num_out_pix>=0) {
[K		> 		out_ci = &ctx->img2_ci[num_out_pix];
[K		> 	}
[K		> 	else {
[K		> 		// If there is no output channelinfo struct, create a temporary one to
[K		> 		// use.
[K		> 		// TODO: This is admittedly ugly, but we use these settings for a few
[K		> 		// things even when there is no corresponding output channel, and I
[K		> 		// don't remember exactly why.
[K		> 		iw_zeromem(&default_ci_out, sizeof(struct iw_channelinfo_out));
[K		> 		default_ci_out.channeltype = IW_CHANNELTYPE_NONALPHA;
[K		> 		out_ci = &default_ci_out;
[K		> 	}
[K		>
[K		> 	out_ci  &ctx->img2_ci[output_channel];
[K
	Successful transformation
[K	
Run time statistics:
-----------------------

[K	Initialization: 0.04262590408325195 seconds
[K	Build Analysis: 57.66812086105347 seconds
[K	Diff Analysis: 7.218921422958374 seconds
[K	Clone Analysis: 1.6442210674285889 seconds
[K	Map Generation: 3.8520336151123047 seconds
[K
Crochet finished successfully after 106.69411778450012 seconds

